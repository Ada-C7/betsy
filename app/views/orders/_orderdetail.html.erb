<main>
<article class="order-detail">
    <section class="row">
<h3>Order Number: <%= @order.id%> </h3>
<h3>Order Status: <%= @order.status%> </h3>
<p>Placed On: <%= @order.created_at%> </p>
<p>Updates will be sent to: <%= @order.cust_email%> </p>
<p>Shipping Address: <%= @order.cust_address%> </p>
</section>

<table class="row">
  <thead>
    <tr>
      <th class="medium-6 columns">Product</th>
      <th class="medium-6 columns">Quantity</th>
      <th class="medium-6 columns">Price</th>
      <th class="medium-6 columns">Subtotal</th>
    </tr>
  </thead>
  <% total = [] %>
  <tr>
    <% @order.order_products.each do |product| %>
    <td><%= Product.find_by_id(product.product_id).name %></td>
    <td><%= product.quantity %></td>
    <td><%= number_with_precision(Product.find_by_id(product.product_id).price, precision: 2)%></td>
    <%total << number_with_precision(Product.find_by_id(product.product_id).price, precision: 2) * product.quantity %>
  </tr>
  <% end %>
</table>
Total: <%= total.inject(:+) %>
</article>
</main>
