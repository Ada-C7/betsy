<h1>Cart</h1>
<%= session[:order_ids] %>
<table>
  <thead>
    <tr>
      <th>Product</th>
      <th>Unit Price</th>
      <th>Quantity</th>
      <th></th>
    </tr>
  </thead>
  <tbody>

    <% @order.orderproducts.each do |orderproduct| %>
    <% product = Product.find_by(id: orderproduct.product_id)%>

    <tr>
      <td><%= product.product_name %>  <%= image_tag(product.photo_url)%></td>

      <td>$<%= product.price %></td>
      <td>


        <%= form_for orderproduct, url: update_quantity_path(id: params[:id]) do |f| %>
          <%= f.number_field :quantity, min: 1, placeholder: orderproduct.quantity%>
          <%= f.hidden_field :product_id, value: product.id%>
          <%= f.hidden_field :id, value: orderproduct.id%>
          <%= f.submit "Update", class: 'button'%>
        <% end %>

        <%= button_to "Delete", delete_orderproduct_path(params[:id], orderproduct.id), method: :delete,
          data: {confirm: "Are you sure to delete ?"}, class: "alert button" %>


      </td>
    </tr>
  <% end %>
  <div> <%= link_to "Continue Shopping", root_path, class: 'button' %> </div>

  </tbody>
  <h2>Subtotal: $<%= '%.02f' % @subtotal %></h2>
</table>
