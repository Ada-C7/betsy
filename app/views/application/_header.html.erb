<header>
  <h1>Pajamazon</h1>
  <nav>
    <ul class="dropdown menu" data-dropdown-menu>
      <li><%= link_to "Home", root_path %></li>
      <li>
        <a href="#">By Category</a>
        <ul class="menu">
          <% Category.all.each do |category| %>
            <li><%= link_to category.name, category_products_path(id: category.id) %></li>
          <% end %>
        </ul>
      </li>
      <li>
        <a href="#">By Merchant</a>
        <ul class="menu">
          <% User.all.each do |user| %>
            <li><%= link_to user.username, user_products_path(id: user.id) %></li>
          <% end %>
        </ul>
      </li>
      <li>
        <%= link_to "Cart", carts_path %>
      </li>
      <% if @logged_in_user %>
        <li><%= link_to "Account", account_path %></li>
        <li class="align-right">Hi, <%= @logged_in_user.username %>!</li>
        <li class="align-right"><%= link_to "Log Out", logout_path, method: :delete %></li>
      <% else %>
        <li class="align-right"><%= link_to "Log In", "/auth/github" %></li>
      <% end %>
    </ul>
  </nav>
</header>

<% if flash[:result_text] or flash[:messages] %>
  <section class="row status <%= flash[:status] %>">
    <h3><%= flash[:result_text] %></h3>
    <% if flash[:messages] %>
      <ul>
        <% flash[:messages].each do |name, problems| %>
          <% problems.each do |problem| %>
            <li><%= name.capitalize %> <%= problem %></li>
          <% end %>
        <% end %>
      </ul>
    <% end %>
  </section>
<% end %>
