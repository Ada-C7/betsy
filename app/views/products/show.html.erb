
<section>
  <h2>Product details:</h2>
  <p>Name: <%=@product.name%></p>
  <p>Price: <%=@product.price%></p>
  <%= image_tag @product.photo_url, alt:"picture of #{@product.name}"%>

  <br/>
  <%= "Description: #{@product.description}" %>

  <br/>
  <%= "Categories:   THESE WILL BE BUTTONS "%>
  <% @product.categories.each do |category| %>
  <%= category.name %>
  <% end %>
  <br/>


  <%if @product.stock == nil || @product.stock < 1%>
  <p>Stock: product is out of stock</p>
  <%else%>
  <p>Stock: <%=@product.stock%></p>
  <%end%>
  <p>Merchant: <%=link_to "#{Merchant.find(@product.merchant_id).username}", merchant_path(@product.merchant_id) %></p>

  <%if  OrderProduct.find_by(order_id: session[:order_id], product_id: @product.id) == nil%>
  <%= form_for @order_product do |f| %>
  <%=f.label :quantity%>
  <%= number_field_tag("quantity", 1, min: 1, max: @product.stock) %>
  <%= hidden_field_tag("product_id", @product.id)%>
  <%= f.submit value: "Add to shopping cart" %>
  <% end %>
  <%else%>
  <p>Product already in the <%=link_to "cart", shopping_cart_path%></p>
  <%end%>
  <p><%=link_to "Delete product",  product_path(@product.id),method: :delete, data: {confirm: 'Are you sure?' } %> </p>
</section>

<section>
<%= render partial: "_review_form", locals: { button_text: "Leave Review" } %>
</section>
